<article class="min-h-screen bg-gray-50">
  <!-- Header -->
  <header class="bg-white border-b border-gray-200 py-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between gap-4 flex-wrap">
        <div class="flex items-center gap-3 flex-wrap">
          <h1 class="text-3xl font-bold text-gray-900">
            {{ engineMeta.fullName }}
          </h1>
          <span
            class="px-2 py-0.5 text-xs font-mono bg-gray-100 text-gray-600 rounded"
            >v{{ engineMeta.version }}</span
          >
          @if (pricingMetadata()?.last_verified) {
            <span
              class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200"
              title="Pricing data verified against official provider pages"
            >
              <svg
                class="w-3.5 h-3.5 mr-1"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                  clip-rule="evenodd"
                />
              </svg>
              Prices verified {{ pricingMetadata()?.last_verified }}
            </span>
          }
        </div>

        <!-- Navigation Links -->
        <nav class="flex items-center gap-4">
          <a
            routerLink="/blog/how-we-calculate-llm-tco"
            class="text-sm text-gray-600 hover:text-indigo-600 transition-colors font-medium"
          >
            üìñ Methodology
          </a>
          <a
            routerLink="/insights"
            class="text-sm text-gray-600 hover:text-indigo-600 transition-colors font-medium"
          >
            üìä Insights
          </a>
        </nav>
      </div>
      <p class="mt-2 text-lg text-gray-600">
        Compare LLM costs instantly. Get a procurement-ready analysis in 60
        seconds.
      </p>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Quick Start Cards - Above Fold -->
    <section class="mb-8" aria-labelledby="quickstart-heading">
      <h2
        id="quickstart-heading"
        class="text-lg font-semibold text-gray-900 mb-4"
      >
        What's your scale?
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <!-- Startup Card -->
        <button
          type="button"
          (click)="applyPreset(presets[0])"
          class="relative p-4 sm:p-6 rounded-xl border-2 text-left transition-all duration-200 group focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 cursor-pointer"
          [class.border-indigo-600]="activePreset() === 'saas-startup'"
          [class.bg-indigo-50]="activePreset() === 'saas-startup'"
          [class.ring-2]="activePreset() === 'saas-startup'"
          [class.ring-indigo-600]="activePreset() === 'saas-startup'"
          [class.border-gray-200]="activePreset() !== 'saas-startup'"
          [class.bg-white]="activePreset() !== 'saas-startup'"
          [class.hover:border-indigo-300]="activePreset() !== 'saas-startup'"
          [class.hover:shadow-md]="activePreset() !== 'saas-startup'"
        >
          <div class="flex items-start justify-between">
            <div>
              <span class="text-3xl">üöÄ</span>
              <h3 class="mt-2 text-lg font-bold text-gray-900">Startup</h3>
              <p class="text-sm text-gray-500">~2,000 messages/day</p>
            </div>
            <span
              class="text-xs font-medium px-2 py-1 rounded-full bg-green-100 text-green-700"
            >
              $50-200/mo
            </span>
          </div>
          <p class="mt-3 text-sm text-gray-600">
            Customer support chatbot, internal tools, MVP testing
          </p>
          @if (activePreset() === "saas-startup") {
            <span
              class="absolute top-3 right-3 flex h-6 w-6 items-center justify-center rounded-full bg-indigo-600 text-white text-sm"
              >‚úì</span
            >
          }
        </button>

        <!-- Growth Card -->
        <button
          type="button"
          (click)="applyPreset(presets[1])"
          class="relative p-4 sm:p-6 rounded-xl border-2 text-left transition-all duration-200 group focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 cursor-pointer"
          [class.border-indigo-600]="activePreset() === 'enterprise-support'"
          [class.bg-indigo-50]="activePreset() === 'enterprise-support'"
          [class.ring-2]="activePreset() === 'enterprise-support'"
          [class.ring-indigo-600]="activePreset() === 'enterprise-support'"
          [class.border-gray-200]="activePreset() !== 'enterprise-support'"
          [class.bg-white]="activePreset() !== 'enterprise-support'"
          [class.hover:border-indigo-300]="
            activePreset() !== 'enterprise-support'
          "
          [class.hover:shadow-md]="activePreset() !== 'enterprise-support'"
        >
          <div class="flex items-start justify-between">
            <div>
              <span class="text-3xl">üìà</span>
              <h3 class="mt-2 text-lg font-bold text-gray-900">Growth</h3>
              <p class="text-sm text-gray-500">~25,000 messages/day</p>
            </div>
            <span
              class="text-xs font-medium px-2 py-1 rounded-full bg-yellow-100 text-yellow-700"
            >
              $500-2K/mo
            </span>
          </div>
          <p class="mt-3 text-sm text-gray-600">
            Multi-department deployment, high-volume support hub
          </p>
          @if (activePreset() === "enterprise-support") {
            <span
              class="absolute top-3 right-3 flex h-6 w-6 items-center justify-center rounded-full bg-indigo-600 text-white text-sm"
              >‚úì</span
            >
          }
        </button>

        <!-- Enterprise Card -->
        <button
          type="button"
          (click)="applyPreset(presets[3])"
          class="relative p-4 sm:p-6 rounded-xl border-2 text-left transition-all duration-200 group focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 cursor-pointer"
          [class.border-indigo-600]="activePreset() === 'rag-knowledge'"
          [class.bg-indigo-50]="activePreset() === 'rag-knowledge'"
          [class.ring-2]="activePreset() === 'rag-knowledge'"
          [class.ring-indigo-600]="activePreset() === 'rag-knowledge'"
          [class.border-gray-200]="activePreset() !== 'rag-knowledge'"
          [class.bg-white]="activePreset() !== 'rag-knowledge'"
          [class.hover:border-indigo-300]="activePreset() !== 'rag-knowledge'"
          [class.hover:shadow-md]="activePreset() !== 'rag-knowledge'"
        >
          <div class="flex items-start justify-between">
            <div>
              <span class="text-3xl">üè¢</span>
              <h3 class="mt-2 text-lg font-bold text-gray-900">
                Enterprise RAG
              </h3>
              <p class="text-sm text-gray-500">Heavy context (15K tokens)</p>
            </div>
            <span
              class="text-xs font-medium px-2 py-1 rounded-full bg-purple-100 text-purple-700"
            >
              $1K-5K/mo
            </span>
          </div>
          <p class="mt-3 text-sm text-gray-600">
            Document search, knowledge base, long-context workflows
          </p>
          @if (activePreset() === "rag-knowledge") {
            <span
              class="absolute top-3 right-3 flex h-6 w-6 items-center justify-center rounded-full bg-indigo-600 text-white text-sm"
              >‚úì</span
            >
          }
        </button>
      </div>

      <!-- More scenarios toggle -->
      <details class="mt-4">
        <summary
          class="text-sm text-indigo-600 cursor-pointer hover:text-indigo-800 font-medium"
        >
          + More scenarios (Dev Tools, Content Generation)
        </summary>
        <div class="mt-3 flex flex-wrap gap-3">
          @for (preset of presets; track preset.id) {
            @if (
              preset.id !== "saas-startup" &&
              preset.id !== "enterprise-support" &&
              preset.id !== "rag-knowledge"
            ) {
              <button
                type="button"
                (click)="applyPreset(preset)"
                class="group relative px-4 py-3 rounded-lg border-2 transition-all duration-150 ease-out"
                [class.border-indigo-600]="activePreset() === preset.id"
                [class.bg-indigo-50]="activePreset() === preset.id"
                [class.border-gray-200]="activePreset() !== preset.id"
                [class.bg-white]="activePreset() !== preset.id"
                [class.hover:border-indigo-300]="activePreset() !== preset.id"
              >
                <span
                  class="block text-xs font-medium text-indigo-600 uppercase tracking-wide mb-0.5"
                  >{{ preset.description }}</span
                >
                <span class="block text-sm font-semibold text-gray-900">{{
                  preset.name
                }}</span>
                @if (activePreset() === preset.id) {
                  <span
                    class="absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-indigo-600 text-white text-xs"
                    >‚úì</span
                  >
                }
              </button>
            }
          }
        </div>
      </details>
    </section>

    <div class="lg:grid lg:grid-cols-12 lg:gap-8">
      <!-- Sidebar: Controls -->
      <aside class="lg:col-span-3">
        <div class="bg-white rounded-lg shadow p-6 xl:sticky xl:top-8">
          <h2 class="text-lg font-semibold text-gray-900 mb-6">
            Configuration
          </h2>

          <!-- Model Selector Section -->
          <div class="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
            <div class="flex items-center justify-between mb-3">
              <h3 class="text-sm font-medium text-gray-700">Compare Models</h3>
              <span class="text-xs text-gray-500 font-medium">
                {{ selectedModelIds().size }}/5 selected
              </span>
            </div>

            <div class="space-y-1 max-h-64 overflow-y-auto">
              @for (model of availableModels(); track model.id) {
                <label
                  class="flex items-center gap-3 p-2 rounded-md cursor-pointer transition-colors"
                  [ngClass]="{
                    'bg-indigo-50 border border-indigo-200': isModelSelected(
                      model.id
                    ),
                    'hover:bg-gray-100':
                      !isModelSelected(model.id) && canSelectMoreModels(),
                    'opacity-50':
                      !isModelSelected(model.id) && !canSelectMoreModels(),
                    'cursor-not-allowed':
                      !isModelSelected(model.id) && !canSelectMoreModels(),
                  }"
                >
                  <input
                    type="checkbox"
                    [checked]="isModelSelected(model.id)"
                    [disabled]="
                      (isModelSelected(model.id) && !canDeselectModel()) ||
                      (!isModelSelected(model.id) && !canSelectMoreModels())
                    "
                    [attr.aria-describedby]="
                      !isModelSelected(model.id) && !canSelectMoreModels()
                        ? 'max-models-warning'
                        : isModelSelected(model.id) && !canDeselectModel()
                          ? 'min-models-warning'
                          : null
                    "
                    [attr.aria-disabled]="
                      (isModelSelected(model.id) && !canDeselectModel()) ||
                      (!isModelSelected(model.id) && !canSelectMoreModels())
                    "
                    (change)="toggleModel(model.id)"
                    class="w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"
                  />
                  <div class="flex-1 min-w-0">
                    <a
                      [routerLink]="['/models', model.id]"
                      class="text-sm text-gray-900 block truncate hover:text-indigo-600 transition-colors cursor-pointer font-medium"
                    >
                      {{ model.name }}
                      @if (isRecommendedForContext(model.id)) {
                        <span
                          class="ml-2 text-xs"
                          title="Recommended for current volume"
                          >üéØ</span
                        >
                      }
                    </a>
                    <span class="text-xs text-gray-500">{{
                      model.provider
                    }}</span>
                  </div>
                  @if (isModelSelected(model.id) && !canDeselectModel()) {
                    <span
                      id="min-models-warning"
                      class="text-xs text-amber-600 font-medium"
                      title="At least 1 model required"
                      role="status"
                      aria-live="polite"
                      >Min 1</span
                    >
                  }
                </label>
              }
            </div>

            @if (!canSelectMoreModels()) {
              <p
                id="max-models-warning"
                class="mt-3 text-xs text-amber-600 flex items-center gap-1"
                role="status"
                aria-live="polite"
              >
                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                  <path
                    fill-rule="evenodd"
                    d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
                    clip-rule="evenodd"
                  />
                </svg>
                Max 5 models for readability
              </p>
            }

            @if (pricingMetadata()) {
              <div class="mt-3 pt-3 border-t border-gray-200 space-y-2">
                <div class="flex items-center gap-2">
                  <span
                    class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"
                  >
                    <svg
                      class="w-3 h-3 mr-1"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                        clip-rule="evenodd"
                      />
                    </svg>
                    Verified
                    {{
                      pricingMetadata()?.last_verified ||
                        pricingMetadata()?.last_updated
                    }}
                  </span>
                </div>
                <p class="text-xs text-gray-500">
                  Pricing v{{ pricingMetadata()?.version }} ¬∑ Updated
                  {{ pricingMetadata()?.update_frequency || "weekly" }}
                </p>
              </div>
            }
          </div>

          <!-- Messages per Day -->
          <div class="mb-6">
            <div class="flex justify-between items-baseline mb-2">
              <label class="text-sm font-medium text-gray-700">
                Messages per Day
              </label>
              <span
                class="text-xs font-medium px-2 py-0.5 rounded-full bg-indigo-100 text-indigo-700"
              >
                {{ messageVolumeLabel() }}
              </span>
            </div>
            <div class="flex items-center gap-3">
              <input
                type="range"
                [min]="100"
                [max]="50000"
                [step]="100"
                [value]="messagesPerDay()"
                (input)="onMessagesChange($any($event.target).valueAsNumber)"
                class="flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
                aria-describedby="messages-value"
                [attr.aria-label]="'Messages per day: ' + messagesPerDay()"
                [attr.aria-valuemin]="100"
                [attr.aria-valuemax]="50000"
                [attr.aria-valuenow]="messagesPerDay()"
              />
              <span
                id="messages-value"
                class="w-16 text-right text-sm font-bold text-indigo-600 tabular-nums"
              >
                {{ messagesPerDay() | number }}
              </span>
            </div>
            <!-- Snap point indicators -->
            <div class="flex justify-between text-xs text-gray-400 mt-1 px-1">
              <span>100</span>
              <span>10k</span>
              <span>50k</span>
            </div>
          </div>

          <!-- Input Tokens -->
          <div class="mb-6">
            <div class="flex justify-between items-baseline mb-2">
              <label class="text-sm font-medium text-gray-700">
                Input Tokens/Message
              </label>
              <span
                class="text-xs font-medium px-2 py-0.5 rounded-full bg-indigo-100 text-indigo-700"
              >
                {{ inputTokensLabel() }}
              </span>
            </div>
            <div class="flex items-center gap-3">
              <input
                type="range"
                [min]="50"
                [max]="2000"
                [step]="50"
                [value]="tokensInputPerMessage()"
                (input)="onInputTokensChange($any($event.target).valueAsNumber)"
                class="flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
                aria-describedby="input-tokens-value"
                [attr.aria-label]="'Input tokens: ' + tokensInputPerMessage()"
                [attr.aria-valuemin]="50"
                [attr.aria-valuemax]="2000"
                [attr.aria-valuenow]="tokensInputPerMessage()"
              />
              <span
                id="input-tokens-value"
                class="w-16 text-right text-sm font-bold text-indigo-600 tabular-nums"
              >
                {{ tokensInputPerMessage() }}
              </span>
            </div>
            <div class="flex justify-between text-xs text-gray-400 mt-1 px-1">
              <span>50</span>
              <span>500</span>
              <span>2k</span>
            </div>
          </div>

          <!-- Output Tokens -->
          <div class="mb-6">
            <div class="flex justify-between items-baseline mb-2">
              <label class="text-sm font-medium text-gray-700">
                Output Tokens/Message
              </label>
              <span
                class="text-xs font-medium px-2 py-0.5 rounded-full bg-indigo-100 text-indigo-700"
              >
                {{ outputTokensLabel() }}
              </span>
            </div>
            <div class="flex items-center gap-3">
              <input
                type="range"
                [min]="50"
                [max]="4000"
                [step]="50"
                [value]="tokensOutputPerMessage()"
                (input)="
                  onOutputTokensChange($any($event.target).valueAsNumber)
                "
                class="flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
                aria-describedby="output-tokens-value"
                [attr.aria-label]="'Output tokens: ' + tokensOutputPerMessage()"
                [attr.aria-valuemin]="50"
                [attr.aria-valuemax]="4000"
                [attr.aria-valuenow]="tokensOutputPerMessage()"
              />
              <span
                id="output-tokens-value"
                class="w-16 text-right text-sm font-bold text-indigo-600 tabular-nums"
              >
                {{ tokensOutputPerMessage() }}
              </span>
            </div>
            <div class="flex justify-between text-xs text-gray-400 mt-1 px-1">
              <span>50</span>
              <span>1k</span>
              <span>4k</span>
            </div>
          </div>

          <!-- Cache Hit Rate -->
          <div class="mb-6">
            <div class="flex justify-between items-baseline mb-2">
              <label
                class="text-sm font-medium text-gray-700 flex items-center gap-1.5"
              >
                Cache Hit Rate
                <button
                  type="button"
                  class="text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded cursor-pointer"
                  title="Set to 0% if not using prompt caching. Most apps with static prompts achieve 20-50% cache hits."
                  aria-label="Cache hit rate help: Set to 0% if not using prompt caching. Most apps with static prompts achieve 20-50% cache hits."
                >
                  <svg
                    class="w-3.5 h-3.5"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    aria-hidden="true"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </button>
              </label>
              <span
                class="text-xs font-medium px-2 py-0.5 rounded-full bg-indigo-100 text-indigo-700"
              >
                {{ cacheLabel() }}
              </span>
            </div>
            <div class="flex items-center gap-3">
              <input
                type="range"
                [min]="0"
                [max]="1"
                [step]="0.05"
                [value]="cacheHitRate()"
                (input)="onCacheRateChange($any($event.target).valueAsNumber)"
                class="flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
                aria-describedby="cache-value"
                [attr.aria-label]="'Cache hit rate: ' + formatCacheRate()"
                [attr.aria-valuemin]="0"
                [attr.aria-valuemax]="1"
                [attr.aria-valuenow]="cacheHitRate()"
              />
              <span
                id="cache-value"
                class="w-16 text-right text-sm font-bold text-indigo-600 tabular-nums"
              >
                {{ formatCacheRate() }}
              </span>
            </div>
            <div class="flex justify-between text-xs text-gray-400 mt-1 px-1">
              <span>0%</span>
              <span>50%</span>
              <span>100%</span>
            </div>
          </div>

          <!-- Reset Button -->
          <button
            type="button"
            (click)="resetToDefaults()"
            class="w-full mt-6 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm font-medium rounded-lg transition-colors border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 cursor-pointer"
          >
            Reset to Defaults
          </button>
        </div>
      </aside>

      <!-- Main: Model Cards -->
      <div class="lg:col-span-9 mt-8 lg:mt-0">
        @if (isLoading()) {
          <!-- CLS Prevention: Skeleton placeholders with exact card dimensions -->
          <div class="mb-6">
            <div class="skeleton-card rounded-xl h-44"></div>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            @for (i of [1, 2, 3]; track i) {
              <div class="skeleton-card rounded-lg"></div>
            }
          </div>
        } @else if (loadError()) {
          <div class="text-center py-12">
            <p class="text-red-600 mb-4">{{ loadError() }}</p>
            <button
              type="button"
              (click)="retryLoad()"
              [disabled]="isRetrying()"
              class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"
            >
              @if (isRetrying()) {
                <span class="flex items-center gap-2">
                  <svg
                    class="animate-spin w-4 h-4"
                    fill="none"
                    viewBox="0 0 24 24"
                    aria-hidden="true"
                  >
                    <circle
                      class="opacity-25"
                      cx="12"
                      cy="12"
                      r="10"
                      stroke="currentColor"
                      stroke-width="4"
                    ></circle>
                    <path
                      class="opacity-75"
                      fill="currentColor"
                      d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                    ></path>
                  </svg>
                  Retrying...
                </span>
              } @else {
                Retry
              }
            </button>
          </div>
        } @else {
          <!-- Scenario ID Badge - Enterprise Audit Trail -->
          <div class="flex items-center justify-between mb-4">
            <p class="text-xs text-gray-400 uppercase tracking-wide">
              Analysis Results
            </p>
            <div class="flex items-center gap-2">
              <span class="text-xs text-gray-400">Scenario:</span>
              <code
                class="px-2 py-1 bg-gray-100 rounded text-xs font-mono text-gray-700 select-all"
                >{{ scenarioId() }}</code
              >
            </div>
          </div>

          <!-- Winner Card (Sticky on Desktop) - CLS Prevention: Fixed min-height -->
          @if (bestModel(); as winner) {
            <div
              class="mb-6 lg:sticky lg:top-4 lg:z-10 transition-all duration-300"
              aria-live="polite"
              [class.winner-card-stable]="!isWinnerCardCompacted()"
              [class.winner-card-compact]="isWinnerCardCompacted()"
            >
              <div
                class="bg-gradient-to-r from-yellow-50 via-amber-50 to-yellow-50 rounded-xl shadow-lg ring-2 ring-yellow-400 overflow-hidden transition-gpu"
              >
                <!-- Full Content (shown when NOT compacted) -->
                @if (!isWinnerCardCompacted()) {
                  <div class="p-6">
                    <div
                      class="flex flex-col md:flex-row md:items-center md:justify-between gap-4"
                    >
                      <!-- Winner Info -->
                      <div class="flex items-center gap-4">
                        <div
                          class="flex-shrink-0 w-12 h-12 flex items-center justify-center rounded-full bg-yellow-400 text-2xl"
                        >
                          <span role="img" aria-label="Winner">üèÜ</span>
                        </div>
                        <div>
                          <div class="flex items-center gap-2">
                            <a
                              [routerLink]="['/models', winner.modelId]"
                              class="text-gray-900 hover:text-indigo-600 transition-colors cursor-pointer no-underline"
                            >
                              <h3 class="text-xl font-bold">
                                {{ winner.modelName }}
                              </h3>
                            </a>
                            <span
                              class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-yellow-400 text-yellow-900"
                            >
                              Best Value
                            </span>
                            @if (isRecommendedForContext(winner.modelId)) {
                              <span
                                class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-blue-100 text-blue-800 border border-blue-200"
                              >
                                üéØ Recommended Match
                              </span>
                            }
                          </div>
                          <p class="text-sm text-gray-600">
                            {{ winner.provider }}
                          </p>
                        </div>
                      </div>

                      <!-- Winner Cost - CLS Prevention: tabular-nums for stable widths -->
                      <div class="text-center md:text-right">
                        <p
                          class="text-sm text-gray-500 uppercase tracking-wide"
                        >
                          Monthly Cost
                        </p>
                        <p
                          class="text-4xl font-bold text-gray-900 tabular-nums"
                        >
                          {{
                            winner.monthlyCost
                              | currency: "USD" : "symbol" : "1.2-2"
                          }}
                        </p>
                        <p class="text-sm text-gray-500">
                          ValueScore:
                          <span
                            class="font-semibold text-indigo-600 tabular-nums"
                            >{{ winner.valueScore | number: "1.4-4" }}</span
                          >
                        </p>
                      </div>
                    </div>

                    <!-- Aggressive Comparison - Marketing Claims (Ghost Update) -->
                    @if (aggressiveComparison(); as comparison) {
                      <div
                        class="mt-4 pt-4 border-t border-yellow-200 ghost-fade"
                        [class.ghost-updating]="isExplanationUpdating()"
                      >
                        <p
                          class="text-xs font-semibold text-gray-500 uppercase mb-3"
                        >
                          Why Switch to {{ comparison.winnerName }}?
                        </p>

                        <!-- Marketing Claims -->
                        <div class="space-y-3">
                          <!-- Savings Claim -->
                          <div
                            class="flex items-start gap-3 p-3 bg-green-50 rounded-lg"
                          >
                            <span
                              class="text-2xl"
                              role="img"
                              aria-label="Savings"
                              >üí∞</span
                            >
                            <div>
                              <p class="text-sm font-semibold text-green-800">
                                {{ comparison.savingsNarration }}
                              </p>
                              <p class="text-xs text-green-600 mt-1">
                                Save
                                {{
                                  comparison.monthlySavings
                                    | currency: "USD" : "symbol" : "1.2-2"
                                }}
                                per month
                              </p>
                            </div>
                          </div>

                          <!-- Trivial Savings Warning -->
                          @if (
                            comparison.monthlySavings < 10 &&
                            comparison.monthlySavings > 0
                          ) {
                            <div
                              class="flex items-start gap-2 p-2.5 bg-amber-50 border border-amber-200 rounded-lg"
                            >
                              <svg
                                class="w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                                aria-hidden="true"
                              >
                                <path
                                  fill-rule="evenodd"
                                  d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
                                  clip-rule="evenodd"
                                />
                              </svg>
                              <div class="flex-1">
                                <p class="text-xs font-medium text-amber-800">
                                  Minimal Savings
                                </p>
                                <p class="text-xs text-amber-700 mt-0.5">
                                  Migration effort may exceed
                                  {{
                                    comparison.monthlySavings
                                      | currency: "USD" : "symbol" : "1.2-2"
                                  }}/mo savings. Consider if quality/latency
                                  differences justify the switch.
                                </p>
                              </div>
                            </div>
                          }

                          <!-- Context Claim (only if multiplier > 1) -->
                          @if (comparison.contextNarration) {
                            <div
                              class="flex items-start gap-3 p-3 bg-purple-50 rounded-lg"
                            >
                              <span
                                class="text-2xl"
                                role="img"
                                aria-label="Context"
                                >üß†</span
                              >
                              <div>
                                <p
                                  class="text-sm font-semibold text-purple-800"
                                >
                                  {{ comparison.contextNarration }}
                                </p>
                                <p class="text-xs text-purple-600 mt-1">
                                  {{ comparison.contextMultiplier }}x more
                                  conversation memory
                                </p>
                              </div>
                            </div>
                          }
                        </div>
                      </div>
                    }

                    <!-- Winner Price Alert CTA -->
                    <div class="mt-4 pt-4 border-t border-yellow-200">
                      <button
                        type="button"
                        (click)="
                          openPriceAlert(
                            winner.modelId,
                            winner.modelName,
                            tokensInputPerMessage(),
                            winner.monthlyCost
                          )
                        "
                        class="w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition-colors cursor-pointer"
                      >
                        <svg
                          class="w-4 h-4"
                          fill="none"
                          stroke="currentColor"
                          viewBox="0 0 24 24"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
                          />
                        </svg>
                        Track {{ winner.modelName }} Pricing Shifts
                      </button>
                      <p class="mt-1.5 text-xs text-gray-500 text-center">
                        Get notified weekly if pricing changes or a competitor
                        undercuts by 15%+
                      </p>
                    </div>
                  </div>
                }

                <!-- Compact Content (shown when compacted/scrolled) -->
                @if (isWinnerCardCompacted()) {
                  <div class="px-4 py-3 flex items-center justify-between">
                    <div class="flex items-center gap-3">
                      <span class="text-xl" role="img" aria-label="Winner"
                        >üèÜ</span
                      >
                      <div>
                        <a
                          [routerLink]="['/models', winner.modelId]"
                          class="text-sm font-bold text-gray-900 hover:text-indigo-600 transition-colors cursor-pointer no-underline"
                          >{{ winner.modelName }}</a
                        >
                        <span class="text-xs text-gray-600 ml-2">{{
                          winner.provider
                        }}</span>
                      </div>
                    </div>
                    <div class="flex items-center gap-4">
                      <div class="text-right">
                        <p class="text-xs text-gray-500 uppercase">Monthly</p>
                        <p class="text-lg font-bold text-gray-900 tabular-nums">
                          {{
                            winner.monthlyCost
                              | currency: "USD" : "symbol" : "1.2-2"
                          }}
                        </p>
                      </div>
                      <button
                        type="button"
                        (click)="expandWinnerCard()"
                        class="text-xs text-indigo-600 hover:text-indigo-800 font-medium cursor-pointer"
                        title="Scroll to top to see full details"
                      >
                        Expand ‚Üë
                      </button>
                    </div>
                  </div>
                }
              </div>
            </div>
          } @else {
            <!-- Empty State CTA -->
            <div
              class="mb-6 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl border-2 border-dashed border-gray-300 p-8 text-center"
            >
              <div
                class="w-16 h-16 mx-auto mb-4 flex items-center justify-center rounded-full bg-indigo-100 text-indigo-600"
              >
                <svg
                  class="w-8 h-8"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M13 10V3L4 14h7v7l9-11h-7z"
                  />
                </svg>
              </div>
              <h3 class="text-lg font-bold text-gray-900 mb-2">
                Choose Your Scale to Get Started
              </h3>
              <p class="text-sm text-gray-600 mb-6">
                Select a preset above (Startup, Growth, or Enterprise RAG) to
                see instant cost comparison across
                {{ availableModels().length }} LLM providers
              </p>

              <!-- Trust Signals -->
              <div
                class="flex flex-wrap items-center justify-center gap-6 text-xs text-gray-500"
              >
                <span class="flex items-center gap-1.5">
                  <svg
                    class="w-4 h-4 text-green-500"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                      clip-rule="evenodd"
                    />
                  </svg>
                  No sign-up required
                </span>
                <span class="flex items-center gap-1.5">
                  <svg
                    class="w-4 h-4 text-green-500"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                      clip-rule="evenodd"
                    />
                  </svg>
                  Results in 1 second
                </span>
                <span class="flex items-center gap-1.5">
                  <svg
                    class="w-4 h-4 text-indigo-500"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"
                    />
                  </svg>
                  {{ analysisCount() | number }}+ analyses run
                </span>
              </div>

              <!-- Quick action buttons -->
              <div class="mt-6 flex flex-wrap justify-center gap-3">
                @for (
                  preset of [presets[0], presets[1], presets[3]];
                  track preset.id
                ) {
                  <button
                    type="button"
                    (click)="applyPreset(preset)"
                    class="px-4 py-2.5 sm:px-5 sm:py-3 bg-white border border-gray-300 hover:border-indigo-400 hover:bg-indigo-50 rounded-lg text-sm font-medium text-gray-700 hover:text-indigo-600 transition-all cursor-pointer"
                  >
                    {{ preset.name }}
                  </button>
                }
              </div>
            </div>
          }

          <!-- Model Routing Simulator - Unique Feature -->
          <div
            class="mb-6 p-4 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl border border-purple-200"
          >
            <div class="flex items-center justify-between mb-3">
              <div class="flex items-center gap-2">
                <span class="text-xl">üîÄ</span>
                <h3 class="text-sm font-semibold text-gray-900">
                  Smart Routing Simulator
                </h3>
                <span
                  class="text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full font-medium"
                  >New</span
                >
              </div>
              <button
                type="button"
                (click)="toggleRouting()"
                class="text-xs font-medium px-4 py-2 sm:px-5 sm:py-2.5 rounded-lg transition-colors cursor-pointer"
                [class.bg-purple-600]="routingEnabled()"
                [class.text-white]="routingEnabled()"
                [class.bg-white]="!routingEnabled()"
                [class.text-purple-600]="!routingEnabled()"
                [class.border]="!routingEnabled()"
                [class.border-purple-300]="!routingEnabled()"
              >
                {{ routingEnabled() ? "Enabled" : "Try It" }}
              </button>
            </div>

            @if (!routingEnabled()) {
              <div class="space-y-2">
                <p class="text-xs text-gray-600">
                  Route simple queries to a cheaper model, complex ones to a
                  smarter model. See your blended cost.
                </p>
                <p class="text-xs text-gray-500 italic">
                  Example: 80% FAQ queries ‚Üí Gemini Flash ($0.50/M), 20%
                  debugging ‚Üí Claude Sonnet ($3/M) = 68% savings
                </p>
              </div>
            } @else {
              <div class="space-y-4">
                <!-- Model Selection -->
                <div class="grid grid-cols-2 gap-4">
                  <!-- Primary (Cheap) Model -->
                  <div>
                    <label class="block text-xs font-medium text-gray-700 mb-1">
                      Simple Queries ({{ routingPrimaryPercent() }}%)
                    </label>
                    <select
                      class="w-full text-sm border border-gray-300 rounded-lg px-3 py-2 bg-white"
                      [value]="routingPrimaryModelId()"
                      (change)="setRoutingPrimary($any($event.target).value)"
                    >
                      @for (model of availableModels(); track model.id) {
                        <option [value]="model.id">{{ model.name }}</option>
                      }
                    </select>
                  </div>
                  <!-- Secondary (Smart) Model -->
                  <div>
                    <label class="block text-xs font-medium text-gray-700 mb-1">
                      Complex Queries ({{ 100 - routingPrimaryPercent() }}%)
                    </label>
                    <select
                      class="w-full text-sm border border-gray-300 rounded-lg px-3 py-2 bg-white"
                      [value]="routingSecondaryModelId()"
                      (change)="setRoutingSecondary($any($event.target).value)"
                    >
                      @for (model of availableModels(); track model.id) {
                        <option [value]="model.id">{{ model.name }}</option>
                      }
                    </select>
                  </div>
                </div>

                <!-- Routing Slider -->
                <div>
                  <div class="flex justify-between text-xs text-gray-500 mb-1">
                    <span>More to cheap model</span>
                    <span>More to smart model</span>
                  </div>
                  <input
                    type="range"
                    min="10"
                    max="90"
                    step="5"
                    [value]="routingPrimaryPercent()"
                    (input)="
                      setRoutingPercent($any($event.target).valueAsNumber)
                    "
                    class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"
                  />
                </div>

                <!-- Same Model Warning -->
                @if (routingSameModelSelected()) {
                  <div
                    class="bg-yellow-50 border border-yellow-300 rounded-lg p-3 flex items-start gap-2"
                  >
                    <svg
                      class="w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
                        clip-rule="evenodd"
                      />
                    </svg>
                    <div class="flex-1">
                      <p class="text-sm font-medium text-yellow-800">
                        Same model selected
                      </p>
                      <p class="text-xs text-yellow-700 mt-0.5">
                        Smart routing works best when you use different models
                        for simple vs complex queries. Choose a cheaper model
                        for simple queries.
                      </p>
                    </div>
                  </div>
                }

                <!-- Blended Cost Result -->
                @if (routedMonthlyCost(); as routed) {
                  <div class="bg-white rounded-lg p-4 border border-purple-200">
                    <div class="flex items-center justify-between">
                      <div>
                        <p class="text-xs text-gray-500 uppercase">
                          Blended Monthly Cost
                        </p>
                        <p
                          class="text-2xl font-bold text-purple-700 tabular-nums"
                        >
                          {{
                            routed.blendedCost
                              | currency: "USD" : "symbol" : "1.2-2"
                          }}
                        </p>
                      </div>
                      <div class="text-right">
                        <p class="text-xs text-gray-500">
                          vs {{ routed.secondaryModel }} only
                        </p>
                        @if (routed.savingsPercent >= 0) {
                          <p class="text-lg font-bold text-green-600">
                            Save {{ routed.savingsPercent }}%
                          </p>
                          <p class="text-xs text-green-600">
                            ({{
                              routed.savingsVsSecondary
                                | currency: "USD" : "symbol" : "1.0-0"
                            }}/mo)
                          </p>
                        } @else {
                          <p class="text-lg font-bold text-red-600">
                            +{{ -routed.savingsPercent }}% More
                          </p>
                          <p class="text-xs text-red-600">
                            ({{
                              -routed.savingsVsSecondary
                                | currency: "USD" : "symbol" : "1.0-0"
                            }}/mo extra)
                          </p>
                        }
                      </div>
                    </div>
                    <p class="mt-2 text-xs text-gray-500">
                      {{ routingPrimaryPercent() }}% ‚Üí
                      {{ routed.primaryModel }} ¬∑
                      {{ 100 - routingPrimaryPercent() }}% ‚Üí
                      {{ routed.secondaryModel }}
                    </p>
                  </div>
                }
              </div>
            }
          </div>

          <!-- All Model Cards Grid -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            @for (result of results(); track result.modelId) {
              <div
                class="bg-white rounded-lg shadow-lg overflow-hidden transition-all duration-150 ease-out stable-height"
                [class.ring-2]="isBestModel(result.modelId)"
                [class.ring-yellow-400]="isBestModel(result.modelId)"
                [class.opacity-90]="isBestModel(result.modelId)"
              >
                <!-- Card Header -->
                <div
                  class="px-6 py-4"
                  [class.bg-gradient-to-r]="isBestModel(result.modelId)"
                  [class.from-yellow-50]="isBestModel(result.modelId)"
                  [class.to-amber-50]="isBestModel(result.modelId)"
                  [class.bg-gray-50]="!isBestModel(result.modelId)"
                >
                  <div class="flex items-center justify-between">
                    <div>
                      <a
                        [routerLink]="['/models', result.modelId]"
                        class="text-gray-900 hover:text-indigo-600 transition-colors cursor-pointer no-underline"
                      >
                        <h3 class="text-lg font-bold">
                          {{ result.modelName }}
                        </h3>
                      </a>
                      <p class="text-sm text-gray-500">{{ result.provider }}</p>
                    </div>
                    <div class="flex items-center gap-2">
                      <!-- Price Alert Bell -->
                      <button
                        type="button"
                        (click)="
                          openPriceAlert(
                            result.modelId,
                            result.modelName,
                            tokensInputPerMessage(),
                            result.monthlyCost
                          )
                        "
                        class="p-1.5 rounded-lg text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 transition-colors cursor-pointer"
                        [attr.aria-label]="
                          'Track pricing for ' + result.modelName
                        "
                        title="Track pricing shifts"
                      >
                        <svg
                          class="w-4 h-4"
                          fill="none"
                          stroke="currentColor"
                          viewBox="0 0 24 24"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
                          />
                        </svg>
                      </button>
                      @if (isBestModel(result.modelId)) {
                        <span
                          class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-yellow-400 text-yellow-900"
                        >
                          #1
                        </span>
                      } @else if (isRecommendedForContext(result.modelId)) {
                        <span
                          class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-blue-100 text-blue-800 border border-blue-200"
                        >
                          üéØ Match
                        </span>
                      }
                    </div>
                  </div>
                </div>

                <!-- Card Body -->
                <div class="px-6 py-6">
                  <!-- Monthly Cost - CLS Prevention: tabular-nums -->
                  <div class="text-center mb-6">
                    <p class="text-sm text-gray-500 uppercase tracking-wide">
                      Monthly Cost
                    </p>
                    <p
                      class="text-3xl font-bold text-gray-900 transition-gpu tabular-nums"
                    >
                      {{
                        result.monthlyCost
                          | currency: "USD" : "symbol" : "1.2-2"
                      }}
                    </p>
                    <!-- Price Trend Indicator -->
                    @if (getTrendIndicator(result.modelId); as trend) {
                      <p
                        class="mt-1 text-xs {{
                          trend.color
                        }} flex items-center justify-center gap-1"
                      >
                        <span class="font-bold">{{ trend.icon }}</span>
                        <span>{{ trend.label }} (30d)</span>
                      </p>
                    }
                  </div>

                  <!-- ValueScore - CLS Prevention: tabular-nums -->
                  <div class="mb-6">
                    <div class="flex justify-between items-center mb-2">
                      <span class="text-sm font-medium text-gray-700"
                        >ValueScore</span
                      >
                      <span
                        class="text-sm font-bold text-indigo-600 tabular-nums"
                        >{{ result.valueScore | number: "1.4-4" }}</span
                      >
                    </div>
                    <div
                      class="w-full bg-gray-200 rounded-full h-2 overflow-hidden"
                      role="progressbar"
                      [attr.aria-valuenow]="result.valueScore"
                      aria-valuemin="0"
                      [attr.aria-valuemax]="bestModel()?.valueScore || 1"
                    >
                      <div
                        class="h-2 rounded-full transition-all duration-200 ease-out"
                        [class.bg-yellow-400]="isBestModel(result.modelId)"
                        [class.bg-indigo-600]="!isBestModel(result.modelId)"
                        [style.width.%]="
                          (result.valueScore / (bestModel()?.valueScore || 1)) *
                          100
                        "
                      ></div>
                    </div>
                  </div>

                  <!-- Daily Breakdown - CLS Prevention: tabular-nums on all values -->
                  <div class="border-t border-gray-100 pt-4">
                    <p
                      class="text-xs font-semibold text-gray-500 uppercase mb-3"
                    >
                      Daily Breakdown
                    </p>
                    <dl class="space-y-2 text-sm">
                      <div class="flex justify-between">
                        <dt class="text-gray-500">Input (non-cached)</dt>
                        <dd class="font-medium text-gray-900 tabular-nums">
                          {{
                            result.dailyCosts.inputNonCached
                              | currency: "USD" : "symbol" : "1.2-2"
                          }}
                        </dd>
                      </div>
                      <div class="flex justify-between">
                        <dt class="text-gray-500">Input (cached)</dt>
                        <dd class="font-medium text-gray-900 tabular-nums">
                          {{
                            result.dailyCosts.inputCached
                              | currency: "USD" : "symbol" : "1.2-2"
                          }}
                        </dd>
                      </div>
                      <div class="flex justify-between">
                        <dt class="text-gray-500">Output</dt>
                        <dd class="font-medium text-gray-900 tabular-nums">
                          {{
                            result.dailyCosts.output
                              | currency: "USD" : "symbol" : "1.2-2"
                          }}
                        </dd>
                      </div>
                      <div
                        class="flex justify-between border-t border-gray-100 pt-2"
                      >
                        <dt class="font-medium text-gray-700">Daily Total</dt>
                        <dd class="font-bold text-gray-900 tabular-nums">
                          {{
                            result.dailyCosts.total
                              | currency: "USD" : "symbol" : "1.2-2"
                          }}
                        </dd>
                      </div>
                    </dl>
                  </div>

                  <!-- Explanation (Ghost Update) -->
                  <div
                    class="mt-4 p-3 bg-gray-50 rounded-lg ghost-fade"
                    [class.ghost-updating]="isExplanationUpdating()"
                  >
                    <p class="text-xs text-gray-600 italic">
                      {{ result.scoreExplanation }}
                    </p>
                  </div>

                  <!-- Specs -->
                  <div class="mt-4 flex justify-between text-xs text-gray-500">
                    <span
                      >Context: {{ result.contextWindow | number }} tokens</span
                    >
                    <span>Latency: {{ result.latencyIndex }}</span>
                  </div>
                </div>
              </div>
            }
          </div>
        }
      </div>
    </div>

    <!-- Cross-links: Micro-Tools -->
    <div class="mb-8 mt-8 grid grid-cols-1 md:grid-cols-3 gap-4">
      <a
        routerLink="/tools/caching-roi"
        class="flex items-center gap-3 p-4 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl border border-indigo-200 hover:border-indigo-400 hover:shadow-md transition-all group"
      >
        <span class="text-2xl flex-shrink-0">üíæ</span>
        <div>
          <p
            class="text-sm font-semibold text-gray-900 group-hover:text-indigo-600"
          >
            Prompt Caching ROI
          </p>
          <p class="text-xs text-gray-500">
            Cache static prompts. Break-even analysis included.
          </p>
        </div>
      </a>
      <a
        routerLink="/tools/context-window"
        class="flex items-center gap-3 p-4 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl border border-emerald-200 hover:border-emerald-400 hover:shadow-md transition-all group"
      >
        <span class="text-2xl flex-shrink-0">üìê</span>
        <div>
          <p
            class="text-sm font-semibold text-gray-900 group-hover:text-emerald-600"
          >
            Context Window Comparator
          </p>
          <p class="text-xs text-gray-500">
            Check which models fit your document size.
          </p>
        </div>
      </a>
      <a
        routerLink="/tools/batch-api"
        class="flex items-center gap-3 p-4 bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl border border-amber-200 hover:border-amber-400 hover:shadow-md transition-all group"
      >
        <span class="text-2xl flex-shrink-0">‚è±Ô∏è</span>
        <div>
          <p
            class="text-sm font-semibold text-gray-900 group-hover:text-amber-600"
          >
            Batch API Calculator
          </p>
          <p class="text-xs text-gray-500">
            Trade 24h turnaround for 50% savings.
          </p>
        </div>
      </a>
    </div>

    <!-- Export Signed LLM Cost Analysis - Terminal Style with No-Friction Flow -->
    <section class="mt-12" aria-labelledby="export-heading">
      <div class="bg-gray-900 rounded-lg overflow-hidden shadow-xl">
        <!-- Terminal Header -->
        <div
          class="flex items-center gap-2 px-4 py-3 bg-gray-800 border-b border-gray-700"
        >
          <div class="flex gap-1.5">
            <span class="w-3 h-3 rounded-full bg-red-500"></span>
            <span class="w-3 h-3 rounded-full bg-yellow-500"></span>
            <span class="w-3 h-3 rounded-full bg-green-500"></span>
          </div>
          <span class="ml-2 text-sm font-mono text-gray-400"
            >tco_analysis_export.sh</span
          >
        </div>

        <!-- Terminal Body -->
        <div class="p-6 font-mono text-sm">
          <!-- Title - Updated Copy for CTO/CFO -->
          <h2 id="export-heading" class="text-emerald-400 font-bold mb-1">
            Export Signed LLM Cost Analysis
          </h2>
          <p class="text-gray-500 text-xs mb-6">
            Includes TCO Breakdown, Token Forecast & Vendor Comparison ready for
            CTO/CFO Approval.
          </p>

          @if (leadSubmitStatus() === "success") {
            <!-- Success State -->
            <div class="space-y-2">
              <p class="text-emerald-400">
                <span class="text-gray-500">$</span> tco-analysis --generate
                --scenario={{ scenarioId() }}
              </p>
              <p class="text-emerald-300">‚úì TCO Analysis PDF queued</p>
              <p class="text-emerald-300">
                ‚úì Scenario ID:
                <span class="text-cyan-400">{{ scenarioId() }}</span>
              </p>
              <p class="text-green-300">
                ‚úì Email notification scheduled ‚Üí {{ leadEmail() }}
              </p>
              <p class="text-gray-400 mt-4">
                <span class="text-gray-500">#</span> Reference this ID for
                procurement:
                <span class="text-yellow-400">{{ scenarioId() }}</span>
              </p>

              <!-- Next Steps Section -->
              <div class="mt-6 pt-4 border-t border-gray-700">
                <p class="text-xs text-gray-500 uppercase mb-3">Next Steps</p>

                <!-- Primary Action: New Analysis -->
                <button
                  type="button"
                  (click)="resetLeadForm()"
                  class="w-full mb-3 px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded font-mono text-sm transition-colors flex items-center justify-center gap-2"
                >
                  <svg
                    class="w-4 h-4"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 4v16m8-8H4"
                    />
                  </svg>
                  [NEW ANALYSIS]
                </button>

                <!-- Related Tools -->
                <p class="text-xs text-gray-500 mb-2">
                  <span class="text-gray-500">#</span> Related Tools
                </p>
                <div class="space-y-1.5">
                  <a
                    routerLink="/tools/caching-roi"
                    class="block text-xs text-cyan-400 hover:text-cyan-300 transition-colors"
                  >
                    ‚Üí Prompt Caching ROI Calculator
                  </a>
                  <a
                    routerLink="/tools/context-window"
                    class="block text-xs text-cyan-400 hover:text-cyan-300 transition-colors"
                  >
                    ‚Üí Context Window Comparator
                  </a>
                  <a
                    routerLink="/insights"
                    class="block text-xs text-cyan-400 hover:text-cyan-300 transition-colors"
                  >
                    ‚Üí Market Insights & Trends
                  </a>
                </div>
              </div>
            </div>
          } @else if (leadSubmitStatus() === "error") {
            <!-- Error State with Recovery Options -->
            <div class="space-y-2">
              <p class="text-red-400 flex items-center gap-2">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="text-gray-500">$</span> [ERROR] PDF Generation
                Failed
              </p>
              <p class="text-xs text-gray-400 pl-7">
                Your browser may be blocking client-side PDF generation. Try
                these alternatives:
              </p>
              <div class="flex flex-col sm:flex-row gap-3 mt-3">
                <button
                  type="button"
                  (click)="resetLeadForm()"
                  class="flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded text-sm font-mono transition-colors"
                >
                  [RETRY WITH EMAIL]
                </button>
                <button
                  type="button"
                  (click)="downloadQuickPdf()"
                  class="flex-1 px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded text-sm font-mono transition-colors"
                >
                  [QUICK EXPORT INSTEAD]
                </button>
              </div>
              <p class="text-xs text-gray-500 mt-2 pl-7">
                <span class="text-gray-500">#</span> Tip: Quick Export doesn't
                require email or browser permissions
              </p>
            </div>
          } @else {
            <!-- Sensitivity Analysis Preview (always visible) -->
            @if (winnerSensitivity(); as sensitivity) {
              <div class="mb-6 pb-6 border-b border-gray-700">
                <p class="text-gray-500 mb-3">
                  <span class="text-cyan-400">#</span> tco_forecast --model="{{
                    sensitivity.modelName
                  }}"
                </p>
                <table class="w-full text-left">
                  <thead>
                    <tr class="text-gray-500 text-xs uppercase">
                      <th class="pb-2">Traffic</th>
                      <th class="pb-2 text-right">Monthly</th>
                      <th class="pb-2 text-right">Annual</th>
                    </tr>
                  </thead>
                  <tbody class="text-gray-300 tabular-nums">
                    <tr>
                      <td class="py-1">
                        <span class="text-yellow-400">1x</span>
                        <span class="text-gray-500 ml-2">(current)</span>
                      </td>
                      <td class="py-1 text-right text-green-400">
                        {{
                          sensitivity.cost1x
                            | currency: "USD" : "symbol" : "1.2-2"
                        }}
                      </td>
                      <td class="py-1 text-right text-gray-400">
                        {{
                          sensitivity.annualCost1x
                            | currency: "USD" : "symbol" : "1.0-0"
                        }}
                      </td>
                    </tr>
                    <tr>
                      <td class="py-1">
                        <span class="text-orange-400">2x</span>
                        <span class="text-gray-500 ml-2">(doubled)</span>
                      </td>
                      <td class="py-1 text-right text-green-400">
                        {{
                          sensitivity.cost2x
                            | currency: "USD" : "symbol" : "1.2-2"
                        }}
                      </td>
                      <td class="py-1 text-right text-gray-400">
                        {{
                          sensitivity.annualCost2x
                            | currency: "USD" : "symbol" : "1.0-0"
                        }}
                      </td>
                    </tr>
                    <tr>
                      <td class="py-1">
                        <span class="text-red-400">3x</span>
                        <span class="text-gray-500 ml-2">(tripled)</span>
                      </td>
                      <td class="py-1 text-right text-green-400">
                        {{
                          sensitivity.cost3x
                            | currency: "USD" : "symbol" : "1.2-2"
                        }}
                      </td>
                      <td class="py-1 text-right text-gray-400">
                        {{
                          sensitivity.annualCost3x
                            | currency: "USD" : "symbol" : "1.0-0"
                        }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            }

            <!-- No-Friction Flow: Two options -->
            @if (!showEmailForm()) {
              <div class="space-y-4">
                <div class="flex flex-col sm:flex-row gap-3">
                  <!-- Quick PDF - No email required -->
                  <button
                    type="button"
                    (click)="downloadQuickPdf()"
                    class="flex-1 px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded font-mono text-sm transition-all duration-150 border border-gray-600 cursor-pointer"
                  >
                    Quick Export (.PDF)
                    <span class="block text-xs text-gray-400 mt-1"
                      >No email required</span
                    >
                  </button>

                  <!-- Enterprise Report - Email required -->
                  <button
                    type="button"
                    (click)="onExportClick()"
                    class="flex-1 px-6 py-3 bg-cyan-600 hover:bg-cyan-500 text-white rounded font-mono text-sm transition-all duration-150 cursor-pointer"
                  >
                    Get Enterprise Report
                    <span class="block text-xs text-cyan-200 mt-1"
                      >Signed + Sensitivity Analysis</span
                    >
                  </button>
                </div>

                <!-- What's in each -->
                <div
                  class="grid grid-cols-2 gap-4 text-xs text-gray-500 pt-2 border-t border-gray-800"
                >
                  <div>
                    <p class="text-gray-400 font-medium mb-1">Quick Export:</p>
                    <ul class="space-y-0.5">
                      <li>‚Üí Model comparison table</li>
                      <li>‚Üí ValueScore ranking</li>
                    </ul>
                  </div>
                  <div>
                    <p class="text-cyan-400 font-medium mb-1">
                      Enterprise Report:
                    </p>
                    <ul class="space-y-0.5">
                      <li>‚Üí Executive Summary</li>
                      <li>‚Üí Sensitivity Analysis (2x/3x)</li>
                      <li>‚Üí Signed with Version ID</li>
                      <li>‚Üí Procurement-ready format</li>
                    </ul>
                  </div>
                </div>
              </div>
            } @else {
              <!-- Email Form (appears after clicking Export) -->
              <div class="space-y-4">
                <!-- Back Button + ESC Hint -->
                <div class="flex items-center justify-between mb-2">
                  <button
                    type="button"
                    (click)="resetLeadForm()"
                    class="text-xs text-gray-500 hover:text-cyan-400 transition-colors flex items-center gap-1"
                  >
                    <svg
                      class="w-3 h-3"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M10 19l-7-7m0 0l7-7m-7 7h18"
                      />
                    </svg>
                    Back to options
                  </button>
                  <span class="text-xs text-gray-500">or press ESC</span>
                </div>

                <div>
                  <label class="text-gray-500 block mb-2">
                    <span class="text-cyan-400">$</span> tco-analysis --email=
                  </label>
                  <div class="flex flex-col sm:flex-row gap-3">
                    <div class="relative flex-1">
                      <input
                        type="email"
                        placeholder="cto@company.com"
                        [value]="leadEmail()"
                        (input)="onEmailChange($any($event.target).value)"
                        class="w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded text-green-400 placeholder-gray-600 focus:border-cyan-400 focus:outline-none font-mono"
                        [class.border-green-500]="isEmailValid()"
                        [class.border-red-500]="leadEmail() && !isEmailValid()"
                        [disabled]="leadSubmitStatus() === 'submitting'"
                        autofocus
                      />
                      @if (leadEmail()) {
                        <span class="absolute right-3 top-1/2 -translate-y-1/2">
                          @if (isEmailValid()) {
                            <span class="text-green-400">‚úì</span>
                          } @else {
                            <span class="text-red-400">‚úó</span>
                          }
                        </span>
                      }
                    </div>
                    <button
                      type="button"
                      (click)="onDownloadReport()"
                      [disabled]="!canSubmitLead()"
                      class="px-6 py-2 rounded font-mono text-sm transition-all duration-150 whitespace-nowrap"
                      [class.bg-cyan-600]="canSubmitLead()"
                      [class.text-white]="canSubmitLead()"
                      [class.hover:bg-cyan-500]="canSubmitLead()"
                      [class.bg-gray-700]="!canSubmitLead()"
                      [class.text-gray-500]="!canSubmitLead()"
                      [class.cursor-not-allowed]="!canSubmitLead()"
                    >
                      @if (leadSubmitStatus() === "submitting") {
                        <span class="inline-flex items-center gap-2">
                          <span class="animate-pulse">‚ñ∂</span>
                          Generating Signed PDF...
                        </span>
                      } @else {
                        [SEND ANALYSIS]
                      }
                    </button>
                  </div>
                  <p class="text-xs text-gray-600 mt-2">
                    Signed PDF will be delivered to your inbox.
                  </p>
                </div>
              </div>
            }
          }
        </div>
      </div>
    </section>

    <!-- Transparency Section - Scoring Model Disclosure -->
    <section class="mt-8 text-center">
      <p class="text-sm text-gray-500 italic">
        Our scoring model balances cost efficiency ({{
          weightDescriptions.costEfficiency.percentage
        }}%) with contextual capacity ({{
          weightDescriptions.contextCapacity.percentage
        }}%), adjusted by real-world latency benchmarks.
      </p>
    </section>

    <!-- Methodology Section -->
    <section
      class="mt-12 bg-white rounded-lg shadow p-8"
      aria-labelledby="methodology-heading"
    >
      <h2
        id="methodology-heading"
        class="text-2xl font-bold text-gray-900 mb-6"
      >
        Methodology: ValueScore Algorithm
      </h2>
      <div class="prose prose-indigo max-w-none">
        <p class="text-gray-600 leading-relaxed">
          {{ engineMeta.fullName }} uses a deterministic
          <strong>ValueScore</strong> algorithm to rank LLM providers. This
          metric balances operational cost with model capability for objective
          vendor comparison.
        </p>
        <p class="text-gray-600 leading-relaxed mt-4">
          The formula rewards efficiency without sacrificing enterprise
          requirements:
        </p>
        <div
          class="bg-gray-50 p-4 rounded-lg my-6 font-mono text-sm overflow-x-auto"
        >
          ValueScore = (1 / MonthlyCost)<sup>{{
            weightDescriptions.costEfficiency.weight
          }}</sup>
          √ó log<sub>10</sub>(ContextWindow)<sup>{{
            weightDescriptions.contextCapacity.weight
          }}</sup>
          √ó LatencyIndex
        </div>
        <ul class="mt-4 space-y-3 text-gray-600">
          <li>
            <strong class="text-gray-900"
              >Cost Efficiency (Œ± =
              {{ weightDescriptions.costEfficiency.weight }}):</strong
            >
            Cost savings weighted at
            {{ weightDescriptions.costEfficiency.percentage }}% ‚Äî the primary
            driver for ROI decisions. Lower costs significantly boost the score.
          </li>
          <li>
            <strong class="text-gray-900"
              >Context Capacity (Œ≤ =
              {{ weightDescriptions.contextCapacity.weight }}):</strong
            >
            Logarithmic scale for Context Window ({{
              weightDescriptions.contextCapacity.percentage
            }}% weight). Larger windows are valuable but show diminishing
            returns at scale.
          </li>
          <li>
            <strong class="text-gray-900">Latency Index:</strong> A linear
            multiplier (0-1) penalizing slower models. High latency impacts user
            experience regardless of cost savings.
          </li>
        </ul>
        <p class="text-gray-500 italic mt-6 text-sm">
          This deterministic approach ensures reproducible, auditable results
          for procurement and compliance requirements.
        </p>
      </div>
    </section>

    <!-- FAQ Section -->
    <section
      class="mt-12 bg-white rounded-lg shadow p-8"
      aria-labelledby="faq-heading"
    >
      <h2 id="faq-heading" class="text-2xl font-bold text-gray-900 mb-6">
        Frequently Asked Questions
      </h2>
      <dl class="space-y-8">
        <div>
          <dt class="text-lg font-semibold text-gray-900">
            Why do input and output tokens have different prices?
          </dt>
          <dd class="mt-2 text-gray-600">
            LLM providers charge more for "generation" (output) than for
            "reading" (input). Output requires more computational resources as
            the model predicts each token sequentially.
            {{ engineMeta.fullName }} separates these costs for accurate TCO
            projections.
          </dd>
        </div>
        <div>
          <dt class="text-lg font-semibold text-gray-900">
            How does Prompt Caching affect TCO?
          </dt>
          <dd class="mt-2 text-gray-600">
            <p>
              Prompt Caching stores static prompt components (system
              instructions, knowledge bases) for reuse at significant discounts
              (50-90% cheaper).
            </p>
            <ul class="mt-2 ml-4 list-disc text-gray-600">
              <li>
                <strong>Without Cache:</strong> Full price for system prompts on
                every API call.
              </li>
              <li>
                <strong>With Cache:</strong> One-time write cost, then
                discounted read costs on subsequent calls.
              </li>
            </ul>
            <p class="mt-2">
              Default cache hit rate is 20%, adjustable based on your deployment
              architecture.
            </p>
          </dd>
        </div>
        <div>
          <dt class="text-lg font-semibold text-gray-900">
            Why is Context Window factored into ValueScore?
          </dt>
          <dd class="mt-2 text-gray-600">
            For enterprise LLM deployments, context capacity is critical for
            maintaining conversation state, processing documents, and avoiding
            context overflow errors. We apply logarithmic scaling to acknowledge
            diminishing returns while ensuring we don't recommend models that
            fail at production workloads.
          </dd>
        </div>
        <div>
          <dt class="text-lg font-semibold text-gray-900">
            Can I use the TCO Analysis for procurement?
          </dt>
          <dd class="mt-2 text-gray-600">
            Yes. The exported PDF includes a signed analysis with deterministic
            methodology, sensitivity projections, and vendor comparison matrix ‚Äî
            formatted for CTO/CFO review and procurement documentation.
          </dd>
        </div>
      </dl>
    </section>

    <!-- SEO Presets Footer - Programmatic Distribution Links -->
    <footer class="mt-12 pt-8 border-t border-gray-200">
      <div class="text-center mb-6">
        <h3
          class="text-sm font-medium text-gray-500 uppercase tracking-wide mb-4"
        >
          Popular Analysis Scenarios
        </h3>
        <nav
          class="flex flex-wrap justify-center gap-3"
          aria-label="Analysis presets"
        >
          @for (preset of seoPresets; track preset.id) {
            <a
              [href]="getPresetUrl(preset)"
              class="px-3 py-2 text-sm text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors"
              [title]="preset.metaDescription"
            >
              {{ preset.name }}
            </a>
          }
        </nav>
      </div>

      <!-- Market Insights CTA -->
      <div
        class="mb-8 p-4 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl border border-indigo-100"
      >
        <div
          class="flex flex-col sm:flex-row items-center justify-between gap-4"
        >
          <div class="flex items-center gap-3">
            <span class="text-2xl">üìä</span>
            <div>
              <h3 class="font-semibold text-gray-900">LLM Market Insights</h3>
              <p class="text-sm text-gray-600">
                See what models other teams are choosing
              </p>
            </div>
          </div>
          <a
            routerLink="/insights"
            class="inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors"
          >
            View Insights
            <svg
              class="w-4 h-4 ml-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M13 7l5 5m0 0l-5 5m5-5H6"
              />
            </svg>
          </a>
        </div>
      </div>

      <!-- Engine Info -->
      <div class="text-center text-xs text-gray-400 space-y-1">
        <p>
          {{ engineMeta.fullName }} ‚Äî Deterministic TCO Analysis for LLM
          Deployments
        </p>
        <p>
          ValueScore Algorithm: Cost Efficiency ({{
            weightDescriptions.costEfficiency.percentage
          }}%) + Context Capacity ({{
            weightDescriptions.contextCapacity.percentage
          }}%)
        </p>
        @if (pricingMetadata()) {
          <p class="text-indigo-500 font-medium">
            Pricing Benchmark v{{ pricingMetadata()?.version }} ¬∑ Verified
            {{
              pricingMetadata()?.last_verified ||
                pricingMetadata()?.last_updated
            }}
          </p>
        }
        <p class="text-gray-400">
          <span class="font-medium text-indigo-500">{{
            analysisCount() | number
          }}</span>
          analyses generated
        </p>
        <p class="pt-2">
          <a
            href="https://github.com/mattipuy/llm-cost-engine"
            target="_blank"
            rel="noopener"
            class="hover:text-indigo-600"
          >
            View on GitHub
          </a>
        </p>
      </div>

      <!-- EU Trust Signals & Compliance -->
      <div class="mt-8 pt-6 border-t border-gray-200">
        <div
          class="flex flex-col md:flex-row justify-center items-center gap-4 md:gap-8 text-xs text-gray-500"
        >
          <!-- GDPR Badge -->
          <div class="flex items-center gap-2">
            <svg
              class="w-4 h-4 text-blue-600"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                clip-rule="evenodd"
              />
            </svg>
            <span>GDPR Compliant</span>
          </div>

          <!-- No Tracking Badge -->
          <div class="flex items-center gap-2">
            <svg
              class="w-4 h-4 text-green-600"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z"
                clip-rule="evenodd"
              />
              <path
                d="M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"
              />
            </svg>
            <span>No Personal Data Tracking</span>
          </div>

          <!-- EU Contact -->
          <div class="flex items-center gap-2">
            <svg
              class="w-4 h-4 text-gray-500"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"
                clip-rule="evenodd"
              />
            </svg>
            <span>EU-Based Development</span>
          </div>
        </div>

        <!-- Privacy Notice -->
        <p class="mt-4 text-center text-xs text-gray-400">
          This tool performs all calculations client-side. No simulation data is
          stored or transmitted to external servers.
          <a href="#" class="underline hover:text-indigo-600 ml-1"
            >Privacy Policy</a
          >
        </p>
      </div>
    </footer>
  </main>

  <!-- Price Alert Modal -->
  <app-price-alert-modal
    [modelId]="alertModelId()"
    [modelName]="alertModelName()"
    [currentPriceInput]="alertPriceInput()"
    [currentMonthlyCost]="alertMonthlyCost()"
    [isOpen]="alertModalOpen()"
    (closed)="closePriceAlert()"
  />
</article>
